(window.vcvWebpackJsonp4x=window.vcvWebpackJsonp4x||[]).push([[0],{"./node_modules/raw-loader/index.js!./singleImage/editor.css":function(e,t){e.exports=".vce-single-image-container {\n  min-height: 1em;\n}\n\n.vce-single-image canvas {\n  max-width: 100%;\n  vertical-align: top;\n}\n\n.vce-single-image.vcvhelper {\n  display: inline-block;\n  vertical-align: top;\n}"},"./node_modules/raw-loader/index.js!./singleImage/styles.css":function(e,t){e.exports="a.vce-single-image-inner {\n  color: transparent;\n  border-bottom: 0;\n  text-decoration: none;\n  box-shadow: none;\n}\n\na.vce-single-image-inner:hover,\na.vce-single-image-inner:focus {\n  text-decoration: none;\n  box-shadow: none;\n  border-bottom: 0;\n}\n\n.vce-single-image-inner {\n  display: inline-block;\n  vertical-align: top;\n  line-height: 1;\n  max-width: 100%;\n}\n\n.vce-single-image-wrapper {\n  display: inline-block;\n  max-width: 100%;\n  overflow: hidden;\n  vertical-align: top;\n}\n\n.vce-single-image-wrapper img {\n  vertical-align: top;\n  max-width: 100%;\n}\n\n.vce-single-image--border-rounded {\n  border-radius: 5px;\n  overflow: hidden;\n}\n\n.vce-single-image--border-round {\n  border-radius: 50%;\n  overflow: hidden;\n}\n\n.vce-single-image--size-custom {\n  background-size: cover;\n  background-position: center;\n  max-width: 100%;\n}\n\n.vce-single-image--size-custom::after {\n  content:'';\n  display: block;\n  padding-bottom: 66.66%;\n}\n\n.vce-single-image--border-round.vce-single-image--size-custom::after {\n  padding-bottom: 100%;\n}\n\n.vce-single-image--size-custom .vce-single-image {\n  opacity: 0;\n  position: absolute;\n  max-width: 100%;\n  height: auto;\n}\n\n.vce-single-image--align-center {\n  text-align: center;\n}\n\n.vce-single-image--align-right {\n  text-align: right;\n}\n\n.vce-single-image--align-left {\n  text-align: left;\n}\n\n.vce-single-image-wrapper figure {\n  margin: 0;\n}\n\n.vce-single-image-wrapper figcaption {\n  font-style: italic;\n  margin-top: 10px;\n}\n\n.vce-single-image {\n  position: relative;\n}\n\n.vce-single-image-container .vce-single-image-inner .vce-single-image {\n  box-shadow: none;\n}\n"},"./singleImage/index.js":function(e,t,a){"use strict";a.r(t);var i=a("./node_modules/vc-cake/index.js"),n=a.n(i),s=a("./node_modules/@babel/runtime/helpers/extends.js"),l=a.n(s),o=a("./node_modules/@babel/runtime/helpers/typeof.js"),r=a.n(o),c=a("./node_modules/@babel/runtime/helpers/classCallCheck.js"),g=a.n(c),u=a("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),m=a.n(u),d=a("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),p=a.n(d),h=a("./node_modules/@babel/runtime/helpers/assertThisInitialized.js"),v=a.n(h),b=a("./node_modules/@babel/runtime/helpers/createClass.js"),w=a.n(b),f=a("./node_modules/@babel/runtime/helpers/inherits.js"),I=a.n(f),y=a("./node_modules/@babel/runtime/helpers/defineProperty.js"),x=a.n(y),k=a("./node_modules/react/index.js"),z=a.n(k),S=n.a.getService("api"),E=n.a.getService("renderProcessor"),C=function(e){function t(e){var a;return g()(this,t),a=m()(this,p()(t).call(this,e)),x()(v()(a),"promise",null),a.state={imgElement:null,parsedWidth:null,parsedHeight:null,naturalWidth:null,naturalHeight:null},a.setImage=a.setImage.bind(v()(a)),a.setImageState=a.setImageState.bind(v()(a)),a.setError=a.setError.bind(v()(a)),a}return I()(t,e),w()(t,null,[{key:"drawImageProp",value:function(e,t,a,i,n,s,l,o){2===arguments.length&&(a=i=0,n=e.canvas.width,s=e.canvas.height),(l="number"==typeof l?l:.5)<0&&(l=0),(o="number"==typeof o?o:.5)<0&&(o=0),l>1&&(l=1),o>1&&(o=1);var r,c,g,u,m=t.width,d=t.height,p=Math.min(n/m,s/d),h=m*p,v=d*p,b=1;Math.round(h)<n&&(b=n/h),Math.round(v)<s&&(b=s/v),(r=(m-(g=m/((h*=b)/n)))*l)<0&&(r=0),(c=(d-(u=d/((v*=b)/s)))*o)<0&&(c=0),g>m&&(g=m),u>d&&(u=d),e.imageSmoothingQuality="high",e.drawImage(t,r,c,g,u,a,i,n,s)}}]),w()(t,[{key:"componentDidMount",value:function(){var e=this;this.promise=new window.Promise(function(t,a){e.resolve=t,e.setImage(e.props)}),E.add(this.promise)}},{key:"componentWillUnmount",value:function(){t.image&&t.image.removeEventListener("load",this.setImageState),t.image&&t.image.removeEventListener("error",this.setError)}},{key:"componentWillReceiveProps",value:function(e){this.setImage(e)}},{key:"parseSize",value:function(e,t,a,i){var n=!0;"string"==typeof e?e=e.replace(/\s/g,"").replace(/px/g,"").toLowerCase().split("x"):"object"===r()(e)&&(n=e.crop,e=[e.width,e.height]),a=parseInt(a),i=parseInt(i);var s=parseInt(e[0])<a,l=parseInt(e[1])<i;if(n)e[0]=parseInt(e[0])<a?parseInt(e[0]):a,e[1]=parseInt(e[1])<i?parseInt(e[1]):i;else{if(e[0]=s?parseInt(e[0]):a,e[1]=l?parseInt(e[1]):i,s&&!l){var o=e[0]/a;e[1]=parseInt(i*o)}if(l&&!s){var c=e[1]/i;e[0]=parseInt(a*c)}if(l&&s)if(i<a){var g=e[0]/a;e[1]=parseInt(i*g)}else{var u=e[1]/i;e[0]=parseInt(a*u)}}if(t){var m=e[0]>=e[1]?e[1]:e[0];e={width:m,height:m}}else e={width:e[0],height:e[1]};return e}},{key:"checkRelatedSize",value:function(e){var t=null;return window.vcvImageSizes&&window.vcvImageSizes[e]&&(t=window.vcvImageSizes[e]),t}},{key:"getSizes",value:function(e,t){var a=e.size,i=e.shape,n="";return{width:(n=(a=a.replace(/\s/g,"").replace(/px/g,"").toLowerCase()).match(/\d+(x)\d+/)?this.parseSize(a,"round"===i,t.width,t.height):(n=this.checkRelatedSize(a))?this.parseSize(n,"round"===i,t.width,t.height):this.parseSize({width:t.width,height:t.height},"round"===i,t.width,t.height)).width,height:n.height}}},{key:"setImage",value:function(e){var a=this.getImageUrl(e.atts.image);t.image&&t.image.removeEventListener("load",this.setImageState),t.image&&t.image.removeEventListener("error",this.setError),t.image=new window.Image,t.image.addEventListener("load",this.setImageState),t.image.addEventListener("error",this.setError),a?t.image.src=a:this.setError(),a||this.setState({imgElement:null,parsedWidth:null,parsedHeight:null,naturalWidth:null,naturalHeight:null})}},{key:"setImageState",value:function(e){var t=this,a=e.currentTarget,i=this.getSizes(this.props.atts,a);this.setState({imgElement:e.currentTarget,parsedWidth:i.width,parsedHeight:i.height,naturalWidth:a.width,naturalHeight:a.height},function(){t.resolve&&t.resolve(!0)})}},{key:"setError",value:function(){this.resolve&&this.resolve(!1)}},{key:"resizeImage",value:function(){var e=this.state,a=e.imgElement,i=e.parsedWidth,n=e.parsedHeight,s=e.naturalWidth,l=e.naturalHeight;if(this.canvas){var o=this.canvas.getContext("2d");a?(this.canvas.width=i,this.canvas.height=n,this.canvas.naturalWidth=s,this.canvas.naturalHeight=l,t.drawImageProp(o,a,0,0,i,n,.5,.5)):o.clearRect(0,0,i,n)}}},{key:"getImageShortcode",value:function(e){var t=e.props,a=e.classes,i=e.isDefaultImage,n=e.src,s='[vcvSingleImage class="'.concat(a,'" data-width="').concat(this.state.parsedWidth||0,'" data-height="').concat(this.state.parsedHeight||0,'" src="').concat(n,'" data-img-src="').concat(t["data-img-src"],'" alt="').concat(t.alt,'" title="').concat(t.title,'"');return i&&(s+=' data-default-image="true"'),s+="]"}},{key:"render",value:function(){var e=this,t=this.props,a=t.id,i=t.atts,n=t.editor,s=i.image,o=i.shape,r=i.clickableOptions,c=i.showCaption,g=i.customClass,u=i.size,m=i.alignment,d=i.metaCustomId,p="vce-single-image-container",h="vce-single-image-inner",v={},b={},w={},f="div",I={},y=this.getImageUrl(s);if(I["data-img-src"]=y,I.alt=s&&s.alt?s.alt:"",I.title=s&&s.title?s.title:"","string"==typeof g&&g&&(p+=" "+g),"url"===r&&s&&s.link&&s.link.url){f="a";var x=s.link;v={href:x.url,title:x.title,target:x.targetBlank?"_blank":void 0,rel:x.relNofollow?"nofollow":void 0}}else"imageNewTab"===r?(f="a",v={href:y,target:"_blank"}):"lightbox"===r?(f="a",v={href:y,"data-lightbox":"lightbox-".concat(a)}):"zoom"===r?h+=" vce-single-image-zoom-container":"photoswipe"===r&&(f="a",v={href:y,"data-photoswipe-image":a,"data-photoswipe-index":0},w["data-photoswipe-item"]="photoswipe-".concat(a),c&&(v["data-photoswipe-caption"]=s.caption),b["data-photoswipe-gallery"]=a);m&&(p+=" vce-single-image--align-".concat(m)),"rounded"===o&&(h+=" vce-single-image--border-rounded"),"round"===o&&(h+=" vce-single-image--border-round"),v.key="customProps:".concat(a,"-").concat(y,"-").concat(r,"-").concat(o,"-").concat(u),d&&(b.id=d);var k=this.applyDO("all"),S=null;s&&s.caption&&(S=z.a.createElement("figcaption",null,s.caption));var E=s&&s.urls&&s.urls.length?s.urls[0]:s;E&&E.filter&&"normal"!==E.filter&&(h+=" vce-image-filter--".concat(E.filter));var C="",j={props:I,classes:"vce-single-image",isDefaultImage:!(s&&s.id),src:y};return y&&(C=z.a.createElement("span",l()({className:"".concat("vce-single-image"," vcvhelper")},I,{"data-vcvs-html":this.getImageShortcode(j)}),z.a.createElement("canvas",{ref:function(t){e.canvas=t}}))),"full"===u&&"round"!==o&&(C=z.a.createElement("img",l()({className:"vce-single-image",src:y},I))),this.resizeImage(),z.a.createElement("div",l()({className:p},n,b),z.a.createElement("div",l()({className:"vce vce-single-image-wrapper"},w,{id:"el-"+a},k),z.a.createElement("figure",null,z.a.createElement(f,l()({},v,{className:h,ref:"imageContainer"}),C),S)))}}]),t}(S.elementComponent);x()(C,"image",null),(0,n.a.getService("cook").add)(a("./singleImage/settings.json"),function(e){e.add(C)},{css:a("./node_modules/raw-loader/index.js!./singleImage/styles.css"),editorCss:a("./node_modules/raw-loader/index.js!./singleImage/editor.css")},"")},"./singleImage/settings.json":function(e){e.exports={image:{type:"attachimage",access:"public",value:"single-image.jpg",options:{label:"Image",multiple:!1,defaultValue:"single-image.jpg",onChange:{rules:{clickableOptions:{rule:"value",options:{value:"url"}}},actions:[{action:"attachImageUrls"}]},url:!1,imageFilter:!0}},shape:{type:"buttonGroup",access:"public",value:"square",options:{label:"Shape",values:[{label:"Square",value:"square",icon:"vcv-ui-icon-attribute-shape-square"},{label:"Rounded",value:"rounded",icon:"vcv-ui-icon-attribute-shape-rounded"},{label:"Round",value:"round",icon:"vcv-ui-icon-attribute-shape-round"}]}},designOptions:{type:"designOptions",access:"public",value:{},options:{label:"Design Options"}},editFormTab1:{type:"group",access:"protected",value:["clickableOptions","showCaption","image","shape","size","alignment","metaCustomId","customClass"],options:{label:"General"}},metaEditFormTabs:{type:"group",access:"protected",value:["editFormTab1","designOptions"]},relatedTo:{type:"group",access:"protected",value:["General"]},metaOrder:{type:"number",access:"protected",value:4},customClass:{type:"string",access:"public",value:"",options:{label:"Extra class name",description:"Add an extra class name to the element and refer to it from Custom CSS option."}},size:{type:"string",access:"public",value:"large",options:{label:"Size",description:"Enter image size (Example: 'thumbnail', 'medium', 'large', 'full' or other sizes defined by theme). Alternatively enter size in pixels (Example: 200x100 (Width x Height))."}},clickableOptions:{type:"dropdown",access:"public",value:"",options:{label:"OnClick action",values:[{label:"None",value:""},{label:"Lightbox",value:"lightbox"},{label:"PhotoSwipe",value:"photoswipe"},{label:"Zoom",value:"zoom"},{label:"Open Image in New Tab",value:"imageNewTab"},{label:"Link selector",value:"url"}]}},showCaption:{type:"toggle",access:"public",value:!1,options:{label:"Show image caption in gallery view",onChange:{rules:{clickableOptions:{rule:"value",options:{value:"photoswipe"}}},actions:[{action:"toggleVisibility"}]}}},alignment:{type:"buttonGroup",access:"public",value:"left",options:{label:"Alignment",values:[{label:"Left",value:"left",icon:"vcv-ui-icon-attribute-alignment-left"},{label:"Center",value:"center",icon:"vcv-ui-icon-attribute-alignment-center"},{label:"Right",value:"right",icon:"vcv-ui-icon-attribute-alignment-right"}]}},metaBackendLabels:{type:"group",access:"protected",value:[{value:["clickableOptions"]},{value:["image"]}]},metaCustomId:{type:"customId",access:"public",value:"",options:{label:"Element ID",description:"Apply unique Id to element to link directly to it by using #your_id (for element id use lowercase input only)."}},tag:{access:"protected",type:"string",value:"singleImage"},metaPublicJs:{access:"protected",type:"string",value:{libraries:[{rules:{clickableOptions:{rule:"value",options:{value:"zoom"}}},libPaths:["public/dist/singleImage.min.js"]}]}},sharedAssetsLibrary:{access:"protected",type:"string",value:{libraries:[{rules:{clickableOptions:{rule:"value",options:{value:"lightbox"}}},libsNames:["lightbox"]},{rules:{clickableOptions:{rule:"value",options:{value:"zoom"}}},libsNames:["zoom"]},{rules:{clickableOptions:{rule:"value",options:{value:"photoswipe"}}},libsNames:["photoswipe"]}]}}}}},[["./singleImage/index.js"]]]);